## 6.1 分布式系统

>date: 2019-05-06

![](../assets/images/61.jpg)

### 6.1.1 概述

分布式系统是作为单个完整服务展现在终端用户面前的一组协同工作服务器。组中的服务器共享状态、同步操作，并且任意某个服务器独立故障时都不会影响整个系统的正常运行。

* 分布式和集群

分布式：将一个业务员拆分不同的子业务，分布在不同的机器上执行；

集群：多台服务器集中在一起，实现同一业务，可以视为一台计算机。

但是分布式的每一个节点，都可以用来做集群，但是集群不一定是分布式的。

* `SOA`和微服务架构

`SOA`：面向服务的架构，这是一种设计理念，其中包含多个服务，服务之间通过相互依赖最终提供一系列完整的功能。

微服务：类似`SOA`架构，但是更加强调业务彻底的组件化和服务化，单个业务系统会被拆分为可以独立开发、设计、部署的小应用。

### 6.1.2 可扩展架构

* 垂直扩展和水平扩展

垂直扩展：在系统现有的部件上下工夫，通过提高某个部件的性能（或速度）来提高负载能力的。 

水平扩展：通过增加更多的系统成员（性能或速度还是原来的一样）来提高负载能力的。

### 6.1.3 高可用

#### 负载均衡

* 硬件

* 软件

#### 限流

#### 容灾

* 雪崩

* 异地多活

#### 平滑启动

#### 主从设计

#### 分片模式

### 6.1.4 服务治理

#### 服务注册和发现

#### 路由控制

### 6.1.5 分布式一致

#### `CAP`理论和`BASE`理论

#### 分布式锁

#### 分布式一致方案

* 方案

* 一致性算法

* 唯一`ID`

#### 幂等
