## 7.5 数据可视化

>date: 2019-06-04

![](../assets/images/75.jpg)

### 7.5.1 `Matplotlib`入门

#### 折线图

```python
import random
import matplotlib.pyplot as plt

x = list(range(1, 11))
y = [random.randrange(1, 20) for i in range(1, 11)]

x2 = list(range(1, 11))
y2 = [random.randrange(1, 10) for i in range(1, 11)]

plt.plot(x, y, label='First Line') # 为线条指定名称
plt.plot(x2, y2, label='Second Line')

plt.xlabel('Plot Number') # X轴标签
plt.ylabel('Important var') # Y轴标签
plt.title('Interesting Graph\nJust A Demo') # 标题
plt.legend() # 生成默认图例
plt.savefig('../images/751_01.png')
plt.show()
```

![折线图](../assets/images/751_01.png)

#### 条形图（直方图）

```python
import random
import matplotlib.pyplot as plt

x = list(range(1, 11, 2))
y = [random.randrange(1, 20) for i in range(1, 6)]

x2 = list(range(2, 12, 2))
y2 = [random.randrange(1, 10) for i in range(1, 6)]

plt.bar(x, y, label="Example one")
plt.bar(x2, y2, label="Example two", color='g')

plt.xlabel('Bar Number')
plt.ylabel('Bar Height')
plt.title('Bar')
plt.legend()

plt.savefig('../images/751_02.png')
plt.show()
```

![条形图（直方图）](../assets/images/751_02.png)

#### 散点图

```python
import random
import matplotlib.pyplot as plt

x = list(range(1, 11))
y = [random.randrange(1, 20) for i in range(1, 11)]

plt.scatter(x,y, label='Scatter', color='k', s=25, marker="o")

plt.xlabel('x')
plt.ylabel('y')
plt.title('Scatter')
plt.legend()
plt.savefig('../images/751_03.png')
plt.show()
```

![散点图](../assets/images/751_03.png)

#### 饼图

```python
import matplotlib.pyplot as plt

slices = [7,2,2,13]
activities = ['sleeping','eating','working','playing']
cols = ['#d091da', '#6477f0', '#264fc9', '#117510']

plt.pie(slices,
        labels=activities,
        colors=cols,
        startangle=130,
        shadow= True,
        explode=(0,0.1,0,0), # 拉出切片
        autopct='%1.1f%%') # 将百分比放置到图表

plt.title('Pie')
plt.savefig('../images/751_04.png')
plt.show()
```

![散点图](../assets/images/751_04.png)

#### 堆叠图

```python
import matplotlib.pyplot as plt

days = [1, 2, 3, 4, 5]
sleeping = [7, 8, 6, 11, 7]
eating =   [2, 3, 4, 3, 2]
working =  [7, 8, 7, 2, 2]
playing =  [8, 5, 7, 8, 13]

plt.stackplot(days, 
              sleeping, eating, working, playing,
              labels = ['sleeping', 'eating', 'working', 'playing'],
              colors = ['#7cb5ec', '#434348', '#90ed7d', '#f7a35c'])

plt.xlabel('X')
plt.ylabel('Y')
plt.title('Stack')
plt.legend(loc = 'upper left')
plt.savefig('../images/751_05.png')
plt.show()
```

![堆叠图](../assets/images/751_05.png)

#### 等高线图

```python
import numpy as np
import matplotlib.pyplot as plt

def f(x,y): # 高度函数
    return (1 - x / 2 + x**5 + y**3) * np.exp(-x**2 -y**2)

n = 256
x = np.linspace(-3, 3, n)
y = np.linspace(-3, 3, n)
X,Y = np.meshgrid(x, y)

plt.contourf(X, Y, f(X, Y), 8, alpha=.75, cmap = plt.cm.hot) # 进行颜色填充

C = plt.contour(X, Y, f(X, Y), 8, colors='black', linewidth = 0.5) 

plt.clabel(C, inline=True, fontsize=10) # 添加高度数字

# 隐藏坐标轴
plt.xticks(())
plt.yticks(())
plt.title('Contour')

plt.savefig('../images/751_06.png')
plt.show()
```

![等高线图](../assets/images/751_06.png)

#### `3D`图

```python
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = Axes3D(fig)

X = np.arange(-4, 4, 0.25)
Y = np.arange(-4, 4, 0.25)
X, Y = np.meshgrid(X, Y) # XY平面的网格 
R = np.sqrt(X ** 2 + Y ** 2)
Z = np.sin(R)

ax.plot_surface(X, Y, Z, rstride = 1, cstride = 1, cmap=plt.get_cmap('rainbow')) # 绘制等高线图，rstride 和 cstride 分别代表 row 和 column 的跨度
ax.contourf(X, Y, Z, zdir='z', offset=-2, cmap=plt.get_cmap('rainbow')) #  XY 平面的投影
ax.set_zlim(-2, 2)
plt.savefig('../images/751_07.png')
plt.show()
```

![3D图](../assets/images/751_07.png)

#### 样式相关

```python
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 5 * np.pi, 1000)
y = np.sin(x)
y2 = np.sin(2 * x)

fig = plt.figure() # 创建一个图像窗口
ax = plt.subplot2grid((1, 1), (0, 0)) # 创建 1 个小图，整个图像窗口分成 1 行 1 列

ax.plot(x, y, label='First Line')
ax.plot(x, y2, label='Second Line')

# 填充
ax.fill(x, y, color = "g", alpha = 0.3) # 对函数与坐标轴之间的区域进行填充
ax.fill_between(x, y, y2, facecolor = "b", alpha = 0.5) # 填充两个函数之间的区域

# 坐标轴设置相关
ax.grid(True, color='g', linestyle='--', linewidth = 1)
ax.xaxis.label.set_color('c') # 设置 x 轴标签颜色
ax.yaxis.label.set_color('r') # 设置 y 轴标签颜色
ax.set_yticks([-1, 0, 1]) # 设置 y 轴刻度与范围

# 注释和标记相关
x0 = np.pi / 2
y0 = np.sin(x0)
plt.annotate(r'$sin(x)$', xy=(x0, y0), xycoords='data', xytext=(+30, -30), textcoords='offset points', fontsize=12, arrowprops=dict(arrowstyle='->', connectionstyle="arc3,rad=.2")) # xycoords='data' 基于数据的值来选位置, xytext = (+30, -30) xy 偏差值，textcoords='offset points' 对于标注位置的描述，arrowprops 箭头类型设置
plt.text(0, -1.1, r'$Some\ text.$', fontdict={'size': 12, 'color': 'r'}) # 0, -1.1 选取text的位置

plt.xlabel('X')
plt.ylabel('Y')
plt.title('Style')
plt.legend(loc = 'upper left')
plt.savefig('../images/751_08.png')
plt.show()
```

![样式相关](../assets/images/751_08.png)

#### 多图显示



### 7.5.2 `Seaborn`入门

### 7.5.3 `pyecharts`